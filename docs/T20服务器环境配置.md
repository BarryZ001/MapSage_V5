# T20æœåŠ¡å™¨ç¯å¢ƒé…ç½®

## ğŸ–¥ï¸ æœåŠ¡å™¨ç¯å¢ƒä¿¡æ¯

### å®¹å™¨é…ç½®
- **å®¹å™¨åç§°**: `t20_mapsage_env`
- **åŸºç¡€é•œåƒ**: `ubuntu:20.04`
- **è¿è¡Œæ¨¡å¼**: ç‰¹æƒæ¨¡å¼ (`--privileged`)
- **ç½‘ç»œæ¨¡å¼**: ä¸»æœºç½‘ç»œ (`--network=host`)
- **IPCæ¨¡å¼**: ä¸»æœºIPC (`--ipc=host`)

### ç›®å½•æŒ‚è½½æ˜ å°„

| ä¸»æœºè·¯å¾„ | å®¹å™¨è·¯å¾„ | ç”¨é€” |
|---------|---------|------|
| `/root/mapsage_project/code` | `/workspace/code` | é¡¹ç›®ä»£ç  |
| `/data/datasets` | `/workspace/data` | æ•°æ®é›†å­˜å‚¨ |
| `/root/mapsage_project/weights` | `/workspace/weights` | æ¨¡å‹æƒé‡ |
| `/root/mapsage_project/outputs` | `/workspace/outputs` | è®­ç»ƒè¾“å‡º |

---

## ğŸ“ æ•°æ®é›†é…ç½®

### 1. LoveDAæ•°æ®é›†
- **è·¯å¾„**: `/workspace/data/loveda`
- **ç”¨é€”**: é¥æ„Ÿå›¾åƒè¯­ä¹‰åˆ†å‰²
- **ç»“æ„**:
  ```
  loveda/
  â”œâ”€â”€ Test/
  â”‚   â”œâ”€â”€ Rural/images_png
  â”‚   â””â”€â”€ Urban/images_png
  â”œâ”€â”€ Train/
  â”‚   â”œâ”€â”€ Rural/
  â”‚   â”‚   â”œâ”€â”€ images_png
  â”‚   â”‚   â””â”€â”€ masks_png
  â”‚   â””â”€â”€ Urban/
  â”‚       â”œâ”€â”€ images_png
  â”‚       â””â”€â”€ masks_png
  â””â”€â”€ Val/
      â”œâ”€â”€ Rural/
      â”‚   â”œâ”€â”€ images_png
      â”‚   â””â”€â”€ masks_png
      â””â”€â”€ Urban/
          â”œâ”€â”€ images_png
          â””â”€â”€ masks_png
  ```

### 2. MMRS1Mæ•°æ®é›†
- **è·¯å¾„**: `/workspace/data/mmrs1m`
- **ç”¨é€”**: å¤šæ¨¡æ€é¥æ„Ÿæ•°æ®é›†
- **ç»“æ„**:
  ```
  mmrs1m/
  â””â”€â”€ data/
      â”œâ”€â”€ caption/          # å›¾åƒæè¿°ä»»åŠ¡
      â”œâ”€â”€ classification/   # åˆ†ç±»ä»»åŠ¡
      â”œâ”€â”€ detection/        # ç›®æ ‡æ£€æµ‹ä»»åŠ¡
      â”œâ”€â”€ json/            # æ ‡æ³¨æ–‡ä»¶
      â”œâ”€â”€ RSVG/            # è§†è§‰å®šä½ä»»åŠ¡
      â””â”€â”€ VQA/             # è§†è§‰é—®ç­”ä»»åŠ¡
  ```

### 3. EarthVQAæ•°æ®é›†
- **è·¯å¾„**: `/workspace/data/EarthVQA`
- **ç”¨é€”**: åœ°çƒç§‘å­¦è§†è§‰é—®ç­”
- **ç»“æ„**:
  ```
  EarthVQA/
  â”œâ”€â”€ Test/
  â”‚   â””â”€â”€ images_png
  â”œâ”€â”€ Test_QA.json
  â”œâ”€â”€ Train/
  â”‚   â”œâ”€â”€ images_png
  â”‚   â””â”€â”€ masks_png
  â”œâ”€â”€ Train_QA.json
  â”œâ”€â”€ Val/
  â”‚   â”œâ”€â”€ images_png
  â”‚   â””â”€â”€ masks_png
  â””â”€â”€ Val_QA.json
  ```

---

## ğŸš€ å®¹å™¨å¯åŠ¨å‘½ä»¤

```bash
docker run -dit \
  --name t20_mapsage_env \
  --privileged \
  --ipc=host \
  --network=host \
  -v /root/mapsage_project/code:/workspace/code \
  -v /data/datasets:/workspace/data \
  -v /root/mapsage_project/weights:/workspace/weights \
  -v /root/mapsage_project/outputs:/workspace/outputs \
  ubuntu:20.04
```

---

## ğŸ”§ å·¥ä½œæµç¨‹

### æœ¬åœ°å¼€å‘æµç¨‹
1. **Macæœ¬åœ°ä¿®æ”¹ä»£ç **
2. **æäº¤åˆ°GitHub**
   ```bash
   git add .
   git commit -m "æ›´æ–°å†…å®¹"
   git push origin main
   ```

### æœåŠ¡å™¨éƒ¨ç½²æµç¨‹
1. **è¿›å…¥å®¹å™¨**
   ```bash
   docker exec -it t20_mapsage_env /bin/bash
   ```

2. **æ›´æ–°ä»£ç **
   ```bash
   cd /workspace/code
   git pull origin main
   ```

3. **è¿è¡Œç¨‹åº**
   ```bash
   # æ‰§è¡Œé€‚é…
   ./scripts/quick_adapt_t20.sh
   
   # è¿è¡ŒéªŒè¯
   python scripts/validate_tta.py
   ```

---

## ğŸ“Š è·¯å¾„é…ç½®æ£€æŸ¥

### éªŒè¯æ•°æ®é›†è·¯å¾„
```bash
# æ£€æŸ¥æ•°æ®é›†æ˜¯å¦æ­£ç¡®æŒ‚è½½
ls -la /workspace/data/loveda
ls -la /workspace/data/mmrs1m
ls -la /workspace/data/EarthVQA
```

### éªŒè¯ç›®å½•æƒé™
```bash
# æ£€æŸ¥å†™å…¥æƒé™
touch /workspace/outputs/test_file
rm /workspace/outputs/test_file
```

### éªŒè¯ç¯å¢ƒ
```bash
# æ£€æŸ¥torch-gcuç¯å¢ƒ
python -c "import torch; import ptex; print('ç¯å¢ƒæ­£å¸¸')"
```

---

## ğŸ¯ å…³é”®é…ç½®è¦ç‚¹

1. **æ•°æ®è·¯å¾„**: æ‰€æœ‰æ•°æ®é›†ç»Ÿä¸€åœ¨ `/workspace/data/` ä¸‹
2. **ä»£ç è·¯å¾„**: é¡¹ç›®ä»£ç åœ¨ `/workspace/code/`
3. **è¾“å‡ºè·¯å¾„**: è®­ç»ƒç»“æœä¿å­˜åœ¨ `/workspace/outputs/`
4. **æƒé‡è·¯å¾„**: é¢„è®­ç»ƒæƒé‡åœ¨ `/workspace/weights/`
5. **å®¹å™¨ç½‘ç»œ**: ä½¿ç”¨ä¸»æœºç½‘ç»œï¼Œä¾¿äºè®¿é—®å’Œè°ƒè¯•

è¿™ä¸ªé…ç½®ç¡®ä¿äº†å¼€å‘å’Œéƒ¨ç½²çš„ä¸€è‡´æ€§ï¼Œæ”¯æŒé«˜æ•ˆçš„è¿­ä»£å¼€å‘æµç¨‹ã€‚